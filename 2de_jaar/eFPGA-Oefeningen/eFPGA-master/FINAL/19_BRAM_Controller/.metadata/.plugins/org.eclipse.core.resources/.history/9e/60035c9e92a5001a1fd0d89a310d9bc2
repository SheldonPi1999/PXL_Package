#include <stdio.h>
#include "platform.h"
#include "xil_printf.h"
#include "xil_io.h"

#define AXI_GPIO_DEVICE_ID XPAR_GPIO_DEVICE_ID
#define BYTES_BRAM (XPAR_AXI_BRAM_CTRL_0_S_AXI_HIGHADDR - XPAR_AXI_BRAM_CTRL_0_S_AXI_BASEADDR)

int main()
{
	int number = 0;

    init_platform();

    print("BRAM - EXERCISE\n\r");
    print("---------------\n\r");

    for(;;)
    {
    	printf("Please enter a number: ");
    	scanf("%d", &number);
    	printf("%d\n", number);

    	print("Writing your number in BRAM...\n\r");
        Xil_Out32(XPAR_AXI_BRAM_CTRL_0_S_AXI_BASEADDR + 0, number);
        print("Write completed!\n\r");

        print("Reading your number in BRAM...\n\r");
        Xil_In32(XPAR_AXI_BRAM_CTRL_0_S_AXI_BASEADDR + 0);
    }

    cleanup_platform();
    return 0;
}
