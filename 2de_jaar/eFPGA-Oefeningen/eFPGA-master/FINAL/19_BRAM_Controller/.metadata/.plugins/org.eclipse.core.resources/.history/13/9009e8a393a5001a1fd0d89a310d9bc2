#include <stdio.h>
#include "platform.h"
#include "xil_printf.h"
#include "xil_io.h"
#include "xgpio.h"

#define GPIO_DEVICE_ID_PL XPAR_AXI_GPIO__DEVICE_ID
#define AXI_GPIO_DEVICE_ID XPAR_GPIO_DEVICE_ID
// #define BYTES_BRAM (XPAR_AXI_BRAM_CTRL_0_S_AXI_HIGHADDR - XPAR_AXI_BRAM_CTRL_0_S_AXI_BASEADDR)

int main()
{
	int number = 0;
	int read;

    init_platform();

    print("BRAM - EXERCISE\n\r");
    print("---------------\n\r");

    for(;;)
    {
    	printf("Please enter a number: ");
    	scanf("%d", &number);
    	printf("%d\n", number);

    	print("Writing your number in BRAM...\n");
        Xil_Out32(XPAR_AXI_BRAM_CTRL_0_S_AXI_BASEADDR + 0, number);
        print("Write completed!\n");

        print("Reading your number in BRAM...\n");
        read = Xil_In32(XPAR_AXI_BRAM_CTRL_0_S_AXI_BASEADDR + 0);
        printf("Your number was: %d\n\n", read);

        if(read%2)
        {

        }
    }

    cleanup_platform();
    return 0;
}
